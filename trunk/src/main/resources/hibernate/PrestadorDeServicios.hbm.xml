<?xml version="1.0"?>
<!DOCTYPE hibernate-mapping PUBLIC
		"-//Hibernate/Hibernate Mapping DTD 3.0//EN"
		"http://www.hibernate.org/dtd/hibernate-mapping-3.0.dtd">

<hibernate-mapping package="com.turnolibre.business.prestador" default-access="field">

	<class name="PrestadorDeServicios" table="prestadores_de_servicios">

		<id name="id">
			<generator class="native" />
		</id>
		
		<many-to-one name="rubro" column="rubro_id" class="Rubro" not-null="true" foreign-key="FK_PRESTADOR_RUBRO" />

		<property name="nombre" unique-key="PRESTADOR_BUSINESS_KEY" not-null="true" />
		<property name="imagen" />
		<property name="telefono" not-null="true" />
		<property name="acercaDe" column="acerca_de" />

		<component name="ubicacion" class="com.turnolibre.business.ubicacion.Ubicacion">
			<many-to-one name="ciudad" column="ciudad_id" class="com.turnolibre.business.ubicacion.Ciudad" unique-key="UBICACION_BUSINESS_KEY" not-null="true" foreign-key="FK_UBICACION_CIUDAD" insert="false" update="false" />
			<property name="direccion" unique-key="UBICACION_BUSINESS_KEY" not-null="true"/>
			<many-to-one name="barrio" column="barrio_id" class="com.turnolibre.business.ubicacion.Barrio" foreign-key="FK_UBICACION_BARRIO" insert="false" update="false" />
		</component>

		<set name="agendas" cascade="all,delete-orphan" inverse="true">
			<key column="prestador_de_servicios_id" />
			<one-to-many class="com.turnolibre.business.agenda.Agenda" />
		</set>
		
		<set name="servicios" cascade="all,delete-orphan" inverse="true">
			<key column="prestador_de_servicios_id" />
			<one-to-many class="Servicio" />
		</set>
		
		<set name="noticias" cascade="all,delete-orphan" sort="natural">
			<key column="prestador_de_servicios_id" not-null="true" foreign-key="FK_NOTICIA_PRESTADOR" />
			<one-to-many class="Noticia" />
		</set>

	</class>
	
</hibernate-mapping>
